Memory Leak	"Customer reports:



We have 24GB Memory on the application Server available and we saw as well in the past the issue that the Memory Usage Growing and Growing and Growing. At the moment the tomcat uses already 15,7 GB of the memory. We restricted the tomcat to 20 GB and we are sure that this will be reached in the next days and we have to restart the tomcat.

From our point of view the application must have a memory leak issue.



---



Hello Stephan - first, thank you for following-up. These system issues have been plaguing us for a year now and the workaround with application re-starts every week is certainly not best practice.

Last week we upgraded to vers. 5.1. Since then, I cannot create a full DB export. My users are getting anxious, that I cannot synchronize data for them nor update calculated attributes.

Now, allow me to address your questions.



* I conduct most of the export/import in order to help architects upload mass changes to data. I also use it to create values into attributes (e.g. place the system names related to a project into an attribute, so that it can be shown in a column of a masterplan diagram). The export/import frequency varies, depending on our initiatives. At least once a week, sometimes 10+ times in a week. Most changes are in the systems building block (BB). Exporting just the system BB always causes a system error.



* We use the REST API to synchronize data from our CMDB, primarily to update our iteraplan with data from CMDB (puts). The exact breakdown of gets and puts I don't know. On average, it seems to take about 45 sec. for one data element to be processed. The synchronization is scheduled to run every night.



* I don't have actual data to show the number of concurrent users. Based on my contacts, I would estimate about 3 to 6 concurrent users.



* We would like to use the new interactive client, but I struggle with it. I don't feel comfortable enough to promote it among our users. To start, the initial data load takes minutes. Some functions did not work for me. The hierarchy display is gone. The column widths are not adjustable. If I click on the systems button, it says ""Not all elements can be displayed. Use classic client, please!"". Queries cannot be shared between the old and new client. Or maybe ... I just don't know how to use it properly. Also, it does not work with IE9, which is the standard in our company.



You asked for ""anything else that comes to mind"" ...



* We use the spreadsheet reports frequently and I have several templates. If I make a change to a tempate and upload it, more often than not, the first time that I run that report will also create a server error message. When I run the exact same report for a second time, then it's ok. We also experience occasional server error messages on larger reports (even if I did not make a change to the template). Reports with 5,000 KB Excel files is normal for us. These reports are started via the URL from an intranet webpage.



* We also use the bulk update feature. If I make changes to say 300 elements in one bulk update, it takes time to process it. It comes back with a server error message. If I start the iteraplan client again and go back to the bulk update, it says that it completed the update. So it seems to have worked, but it is annoying to get the error message and have to start the iteraplan client every time.



* When performing an import, the status screen does not refresh to let me know of errors or if it passed that stage. I have to repeatedly click on the browser refresh button to see what is going on. Also annoying. BTW, I don't know if it matters, but I work primarily remotely from my home office in the US. Typical download is 15 Mbps, upload is 2 Mbps.



* On the classic client, if I search the system BB for ""ces"", I get the message ""An error occurred while processing your request. "" Probably, too many hits.



Shall I continue ... I think this is enough feedback for now. "		Fault	iteraplan Support	21/Mar/16 1:35 PM	25/Jun/16 7:00 AM														"21/Mar/16 1:41 PM;sfe;As mentioned in IPS-31, please provide an SQL dump of your iteraplan database, if possible.

Also, if you want to invite further persons to join this ticket and are not able to, please tell me and I will invite them for you. They have to be registered users of this service desk."	06/Apr/16 2:10 PM;sfe;Is there any news whether it is possible for you to send us an SQL dump of your iteraplan database?	13/Apr/16 12:37 PM;sfe;We will now start analyzing the memory leak issue based on your anonymized data you have provided in December last year.	"01/Jun/16 1:10 PM;tam;Hello Richard,

I have some questions to you:
- What is your Boncode-Connector Version? Or could you please update it to latest one?
- Are other applications running on the tomcat instance where you supposing the memory leak?
- Do you have some special settings on IIS different to our installer guide?
- How do you monitor memory usage? Are you using special tools or just the task manager?

Thank you in advance.
Timur

"	"01/Jun/16 2:57 PM;tam;http://www.eclipse.org/mat/
http://docwiki.cisco.com/wiki/How_to_analyze_heap_dumps

https://github.com/javamelody/javamelody/releases
https://github.com/javamelody/javamelody/wiki/UserGuide
"	01/Jun/16 3:33 PM;tam;http://stackoverflow.com/questions/21488738/does-poi-xssf-still-have-crazy-bad-memory-issues	"06/Jun/16 10:14 AM;tam;Hello Richard, hello Hannes.



I tried to reproduce on our side, but actually I couldn't.



There are too many unknown factors for me to get the memory leak you described. Or maybe I have to wait longer.



That's why I have a suggestion. Could you maybe please create the heap dump next time before the server got almost all memory and you have to restart it?



I just found a free utility to do this. Within your JDK/bin folder you can find *_jvisualvm.exe_*. After start you will be able to select the tomcat server instance running on your machine from the list of applications. Then select the monitor tab and press ""heap dump"". See attached screenshot [^memory-heap.png]



Just attach the heap dump as attachment to this ticket.



Thank you in advance.



Best regards

Timur"																																																
