5.3.0 Installation	"Guten Tag



Ich erhalten nach der Installation die Fehlermeldung:



exception 

java.lang.IllegalStateException: Cannot call sendError() after the response has been committed

	org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:450)

	javax.servlet.http.HttpServletResponseWrapper.sendError(HttpServletResponseWrapper.java:119)

	javax.servlet.http.HttpServletResponseWrapper.sendError(HttpServletResponseWrapper.java:119)

	org.springframework.security.web.context.SaveContextOnUpdateOrErrorResponseWrapper.sendError(SaveContextOnUpdateOrErrorResponseWrapper.java:97)

	org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint.commence(BasicAuthenticationEntryPoint.java:54)

	org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:186)

	org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:168)

	org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:131)

	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)

	org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)

	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)

	org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:154)

	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)

	de.iteratec.springframework.security.filters.RequestHeaderAuthenticationFilterWithSuccessHandler.doFilter(RequestHeaderAuthenticationFilterWithSuccessHandler.java:105)

	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)

	org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)

	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)

	org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)

	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)

	de.iteratec.iteraplan.presentation.LoginUrlRedirectFilter.doFilter(LoginUrlRedirectFilter.java:52)

	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)

	org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)

	org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)

	org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)

	org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)

	org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121)

	org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)







note The full stack trace of the root cause is available in the Apache Tomcat/7.0.69 logs.





Das Work und Index Verzeichnis wurden gelöscht, komischerweise finde ich im Log folgende Information welche auf die vorherige Installation verweist:



[INFO ] 01-Nov-2016 11:48:49 [iteraplan.presentation.ContextListener] Build ID is 'Corporate Edition v5.0.0-r24731'



Haben Sie ev. ein Idee?



MFG

Stefan Moser"		Technical question	iteraplan Support	01/Nov/16 11:54 AM	11/Nov/16 9:31 AM														"02/Nov/16 10:39 AM;cst;Sehr geehrter Herr Moser,

würden Sie mir bitte die vollständigen Tomcat-Logs zukommen lassen, um das Verhalten näher analysieren zu können. 
Es geht um die catalina.out und localhost.log Logdateien Ihrer Tomcat-Installation aus dem Zeitraum, in dem der Fehler aufgetreten ist.

Viele Grüße,

Christoph Stangl - iteraplan Support "	"02/Nov/16 11:06 AM;stefan.moser@post.ch;

[^Log.zip] _(5 kB)_"	"02/Nov/16 11:58 AM;cst;Sehr geehrter Herr Moser,

vielen Dank für Ihre Antwort.

Würden Sie bitte die Einstellung zu Ihrem LDAP überpüfen, er scheint hier keine korrekte Verbindung durchführen zu können.
In der ""iteraplan-auth.properties"" finden Sie die getätigten Einstellungen. Nicht das sich das Passwort, oder AD-Organisationseinheiten geändert haben. 

Welche Fehlermeldung erhalten Sie nach Aufruf der Seite im Browser? 

Viele Grüße,

Chrstoph Stangl - iteraplan Support "	"02/Nov/16 12:43 PM;stefan.moser@post.ch;Guten Tag Herr Stangl

Ich habe das konfig. File iteraplan-auth.properties von der Produktion übernommen, da es in der Produktion problemlos funktioniert.

Komischerweise erhalte ich nach dem Aufruf mit dem IE zuerst eine Windows Login Fenster und wenn ich mich anmelden erhalte ich die erste erwähnte Fehlermeldung.

MFG
Stefan Moser

!02.11.png|thumbnail!"	"02/Nov/16 1:37 PM;cst;Hallo, 

das Verhalten kann an Browser-Einstellungen liegen.
Würden Sie bitte im Internet Explorer folgendes überprüfen, habe Ihnen einen Link mit angehängt wo die Konfiguration beschrieben wird.

[Enabling Kerberos Authentication in Internet Explorer|https://docs.oracle.com/cd/E41633_01/pt853pbh1/eng/pt/tsec/task_EnablingKerberosAuthenticationinInternetExplorer-836674.html]

Viele Grüße,

Christoph Stangl - Iteraplan Support "	"02/Nov/16 1:56 PM;stefan.moser@post.ch;Hallo
Ich habe leider keine Zugriff (Berechtigung) auf diese Einstellungen.
Danke und Gruss
Stefan Moser"	"02/Nov/16 2:04 PM;cst;Würden Sie dies bitte prüfen lassen,
das zusammenspiel von Browser und Authentifizierung kann genau die Fehlermeldung erzeugen.

Auch den Eintrag im LOG. 

Grüße,

Christoph "	"03/Nov/16 8:13 AM;stefan.moser@post.ch;Guten Tag

Ich habe es mit Firefox getestet gemäss Anleitung, leider dasselbe Problem.
https://techsupport.osisoft.com/Troubleshooting/KB/KB01223

Wenn Kerberos deaktiviert wäre würde dies in der Produktion auch nicht laufen nehme ich an?

MFG
Stefan Moser
"	"03/Nov/16 8:18 AM;cst;Guten Morgen Herr Moser, 

wir müssen nochmals eine Sache klären, haben Sie LDAP + SSO (= automatischer Login),
oder muss der Benutzername und Passwort jedes mal mit eingegeben werden.

Wenn die Einstellung (Kerberos) nicht im Browser getroffen ist, funktionier LDAP + SSO nicht. 
Ein normale Anmeldung, wenn nur LDAP benutzt wird, sollte Grundsätzlich funktionieren.

Viele Grüße,

Christoph Stangl - iteraplan Support "	03/Nov/16 8:24 AM;stefan.moser@post.ch;Wie am Anfang erwähnt nur LDAP ohne SSO..	"04/Nov/16 9:46 AM;cst;Sehr geehrter Herr Moser,

würden Sie mir bitte Ihre Rufnummer nennen und dann rufe ich Sie hierzu am Montag morgen zurück.
Gerne können Sie mir einen Zeitpunkt nennen, an dem ich Sie gut erreichen kann.

Viele Grüße,

Christoph Stangl - iteraplan Support "	"10/Nov/16 10:31 AM;stefan.moser@post.ch;Hallo Herr Stangl

Ich wäre heute gut erreichbar unter der Nummer T +41 (0)58 386 49 62

MFG
Stefan Moser
"	"10/Nov/16 12:18 PM;cst;Hallo Herr Moser,

habe Sie heute früh Leider nicht erreichen können.
Versuche es erneut um 13:45. 

Grüße,

Christoph Stangl - iteraplan Support "	"10/Nov/16 3:36 PM;stefan.moser@post.ch;Hallo Herr Stangl

Ich habe das mit dem Work Verzeichnis probiert, leider erfolglos.

Können Sie mich bitte tel. kontaktieren?
MFG, Stefan Moser
"	"10/Nov/16 4:26 PM;stefan.moser@post.ch;Hallo Herr Stangl

Habe jetzt mit Iturm installiert, immer noch dasselbe Problem.

MFG, Stefan Moser"	10/Nov/16 4:31 PM;stefan.moser@post.ch;uups, sorry habe nicht das neue war file reinkopiert, jetzt kommt der normale anmelde Bildschirm, jedoch funktioniert das Login nicht.	"11/Nov/16 8:20 AM;stefan.moser@post.ch;Hallo Herr Stangel

Nach einer erneuter Installation hat es nun geklappt!

Danke trotzdem...
MFG
Stefan Moser"	"11/Nov/16 9:31 AM;cst;Sehr merkwürdig das ganze, 

werde trotzdem nochmals mit unseren Entwicklern sprechen, wie so ein Verhalten auftreten kann. 



Sollte es dennoch Fragen, oder Probleme geben, stehe ich Ihnen zur Verfügung. 



Viele Grüße,



Christoph Stangl "	"11/Nov/16 10:27 AM;cst;Sehr merkwürdig das ganze, 
werde trotzdem nochmals mit unseren Entwicklern sprechen, wie so ein Verhalten auftreten kann.

Sollte es dennoch Fragen, oder Probleme geben, stehe ich Ihnen zur Verfügung.

Viele Grüße,
Christoph Stangl"																																				
