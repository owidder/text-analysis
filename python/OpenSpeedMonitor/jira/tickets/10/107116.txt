Fortsetzung von IPS-260: Fehlender Lizenzschlüssel	"Hallo Herr Kainzinger,



zuerst: Frohes Neues Jahr!



Inzwischen haben die Netzwerker Port 1521 freigeschaltet und zumindest mit einer ""HTTP-Installation"" bin ich jetzt einen Schritt weiter. Nehme ich jedenfalls an, denn die Fehlermeldung wegen der Datenbankverbindung erscheint nicht mehr. Allerdings werde ich jetzt nach einer Lizenz gefragt, und ich kann mich nicht daran erinnern, jemals einen Lizenzschlüssel erhalten zu haben und auch Herr Berneaud, der den Vertrag mit Herrn Flick verhandelt hat, hat keinen bekommen. Können Sie mir da weiterhelfen und mir den Schlüssel zukommen lassen?



Wenn ich danach erfolgreich iteraplan starten kann, werde ich mich noch um das TLS-Problem kümmern. Falls ich dort auf unserer Seite alles überprüft und noch immer keinen Erfolg habe, dann würde ich mich noch einmal an Sie wenden. Wahrscheinlich wird es dann doch Zeit für eine Live-Session.



Bis dahin vielen Dank und Grüße,

Christian Imme

"		Technical question	iteraplan Support	02/Jan/17 10:59 AM	10/Jan/17 2:36 PM														"02/Jan/17 1:17 PM;fka;Hallo Herr Imme,

Ihnen auch vorneweg erstmal ein frohes Neues Jahr 2017!

Hier ist der Lizenzschlüssel für die Techem AG:
VGVjaGVtIEFHADMxLjAzLjIwMTcAQjYzNkE0N0YyMTAzRTFBOTA1MkQzRTMwQjU5QjIzRUQwNkI2OERDODY0MkVENTM4NjZDRTlDM0JDMENFNDA1Mw

Lizenzschlüssel sind (erst) seit Version 5 nötig. Wir versenden diese in Regel im Januar, gültig dann bis Frühjahr des Folgejahres, jeweils an die Person, die auch die Benachrichtigungen zu neuen Releases erhält. Bei Techem sind aktuell Sie eingetragen. Wenn noch weitere Personen diese Benachrichtigungen bekommen sollen, geben Sie mir bitte Bescheid.

Bzgl. SSL/TLS warte ich auf Ihre Rückmeldung.

Mit besten Grüßen
Fabian Kainzinger"	"02/Jan/17 5:18 PM;christian.imme@techem.de;Hallo Herr Kainzinger,

Danke für den Lizenzschlüssel! Nach Einspielen des Lizenzschlüssels habe ich jetzt folgenden Status:

http-Installation:
iteraplan startete, aber es konnte zunächst nicht auf die Datenbank zugegriffen werden. Vielleicht haben wir damals, als ein DBA-Kollege und ich die Test-Datenbank von 3.4.1 auf 5.4 migrierten, einen Fehler gemacht, deshalb habe ich jetzt eine erneute Installation gemacht und dabei sowohl für iteraplan als auch iturm die Option der Datenbankinitialisierung gewählt. Zwar gab es eine Reihe von SQL-Fehlern, über nicht gefundene Tabellen/Views (vielleicht ein Hinweis auf Fehler bei der Migration?), aber danach lief die Anwendung. Um Testdaten zu erhalten habe ich dann einfach aus der Prod-Anwendung (weiterhin auf 3.41) einen Excel-Export gemacht und diesen in die Test-Anwendung (5.4) eingespielt. Das hat ebenfalls funktioniert. Leider werden dabei ja keine Reports übernommen und alle Custom-Merkmale landen in der Merkmalsgruppe Default. Schade, ansonsten würde ich das für PROD später wahrscheinlich genauso machen.



https-Installation:
Hier sieht es nach wie vor trostlos aus. Es geht nicht mal lokal.

Zum Vergleich auf Port 8080:

$ curl -kv localhost:8080/iteraplan-t1
* About to connect() to localhost port 8080 (#0)
*   Trying ::1...
* Connected to localhost (::1) port 8080 (#0)
> GET /iteraplan-t1 HTTP/1.1
> User-Agent: curl/7.29.0
> Host: localhost:8080
> Accept: */*
> 
< HTTP/1.1 302 Found
< Server: Apache-Coyote/1.1
< Location: /iteraplan-t1/
< Transfer-Encoding: chunked
< Date: Mon, 02 Jan 2017 15:37:42 GMT
< 
* Connection #0 to host localhost left intact


Und hier mit 8443 (weil ich nicht ständig die Installationen überschreiben wollte, habe ich inzwischen für TLS ein Deployment auf ""iteraplanTLS-t1"" gemacht. Der Output des curl-Kommandos war allerdings vorher derselbe):


$ curl -kv localhost:8443/iteraplanTLS-t1
* About to connect() to localhost port 8443 (#0)
*   Trying ::1...
* Connected to localhost (::1) port 8443 (#0)
> GET /iteraplanTLS-t1 HTTP/1.1
> User-Agent: curl/7.29.0
> Host: localhost:8443
> Accept: */*
> 
* Empty reply from server
* Connection #0 to host localhost left intact
curl: (52) Empty reply from server


Aber ein Java-Prozess (wohl Tomcat) hört auf 8443:

[dei02380@plas-eam-01 iteraplan-5.4.0-corporate-installer]$ sudo netstat -anp | grep ""LISTEN ""
tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      1/systemd           
tcp        0      0 10.254.149.26:22        0.0.0.0:*               LISTEN      12739/sshd          
tcp        0      0 10.254.149.26:5666      0.0.0.0:*               LISTEN      1/systemd           
tcp        0      0 127.0.0.1:199           0.0.0.0:*               LISTEN      1016/snmpd          
tcp6       0      0 :::8080                 :::*                    LISTEN      53160/java          
tcp6       0      0 :::8443                 :::*                    LISTEN      53160/java          
tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      53160/java          
tcp6       0      0 :::8009                 :::*                    LISTEN      53160/java


Ich komme hier jetzt nicht mehr weiter. Können wir vielleicht eine Teamviewer-Session machen?

Viele Grüße,
Christian Imme"	"02/Jan/17 6:04 PM;fka;Hallo Herr Imme,

die Fehler bei der Ausführung des SQL-Skriptes zur DB-Initialisierung sind unbedenklich. Hier werden eventuell bereits vorhandene Tabellen gelöscht. Bei einer leeren Datenbank sind diese aber nicht vorhanden, daher die ""Fehler"".

Wegen einer Teamviewer-Session melde ich mich morgen nochmal.

Viele Grüße
Fabian Kainzinger
"	"03/Jan/17 9:25 AM;fka;Guten Morgen Herr Imme,

leider sind heute alle Kollegen aus dem Support und der Entwicklung entweder noch im Urlaub oder erkrankt. Wir melden uns, sobald ein Termin bei uns möglich ist.

Viele Grüße
Fabian Kainzinger"	"04/Jan/17 5:20 PM;fka;Hallo Herr Imme,

diese Woche sieht es leider schlecht aus mit bzgl. einer Teamviewer-Session, u.a. auch wegen des Feiertags am Freitag in Bayern. Für Anfang nächster Woche hoffe ich auf Besserung.

Zum Thema Tomcat und SSL/TLS sind wir keine Experten. Auf Anhieb fällt uns daher auch mit Ihrer ausführlichen Beschreibung nichts konkretes ein, was falsch konfiguriert sein könnte. Was jedoch generell helfen könnte: Das Logging im Tomcat erhöhen. Am besten bereits im Vorfeld einer Teamviewer-Session, vielleicht ergibt sich daraus ja ein Hinweis auf die Ursache des Problems.

Informationen zum Logging in Tomcat 8: https://tomcat.apache.org/tomcat-8.5-doc/logging.html 
""To enable debug logging for part of Tomcat's internals, you should configure both the appropriate logger(s) and the appropriate handler(s) to use the FINEST or ALL level. e.g.:

org.apache.catalina.session.level=ALL
java.util.logging.ConsoleHandler.level=ALL""

Bekommen Sie damit beim Zugriff auf localhost:8443/iteraplanTLS-t1 Meldungen, die weiterhelfen könnten?

Viele Grüße
Fabian Kainzinger"	"10/Jan/17 12:42 PM;christian.imme@techem.de;Hallo Herr Kainzinger,

das Problem hat sich erledigt. Die Ursache waren wohl Firewallregeln, die dazu noch unterschiedlich auf Citrix-Sessions und auf lokale Sessions reagieren. Allerdings hat mir unser Chefnetzwerker erklärt, dass in unserem internen Netz keinerlei Notwendigkeit für TLS besteht, also bleibe ich bei http.  :-)

Vielen Dank und Gruß,
Christian Imme

PS: ich habe ein Problem mit einer kniffligen iteraQL-Abfrage. Kann ich mich damit auch an Sie wenden?"	"10/Jan/17 2:36 PM;cst;Hallo Herr Imme,



werde das Ticket dann hierzu schließen. 



Fragen zu iterQL werden von unserem Support nicht abgedeckt. Wir können Ihnen hier im Support nicht weiterhelfen.



Habe Ihre Anfrage an Ihren Berater weitergeleitet, dieser wird Sie hierzu kontaktieren.



Viele Grüße,



Christoph Stangl - iteraplan Support  "																																																
