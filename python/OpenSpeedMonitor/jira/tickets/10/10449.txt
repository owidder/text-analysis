Umgang mit nicht-multistep-Results nach der Umstellung	"Nach der Umstellung auf multistep wird es die folgenden MeasuredEvents geben:

1)
Im Zuge der Datenmigration (siehe IT-52) erzeugte MeasuredEvents. Diese sind benannt nach dem Schema
{code}[Job.name]{code}
Die testedPage, die bisher an den Jobs hing, wird jetzt an die erzeugten MeasuredEvents gehängt.

2)
Nach der Umstellung und während des Betriebs erzeugte MeasuredEvents. Die Erzeugung erfolgt beim Eintreffen eines neuen EventResults. 

2.1)
Das eintreffende EventResult wurde gemessen mit einem multistep-WPTServer/-Agenten mit setEventName-command im Script.
Die erzeuten MeasuredEvents sind benannt nach dem eventName, der im Script vergeben wurde. Wenn der EventName nach dem folgenden Schema gesetzt wurde, wird über die Pagename direkt eine Page zugeordnet:
{code}[Pagename]:::[Beliebiger Freitext]{code}
Da die Domain der MeasuredEvents fachlich ein MeasuredEvent-Typ ist (unabhängig von der konkreten Messung und damit z.B. von Browser oder Location), sollte die Benennung sinnvollerweise nicht nach dem alten Jobnamen erfolgen. Der MeasuredEvent, der die Homepage misst, sollte also generisch mittels setEventName auf den Namen ""HP:::Homepage"" gesetzt werden, anstatt für jeden alten Job ein Event zu erzeugen (z. B. ""HP:::IE8_step01_homepage_hetzner"", ""HP:::IE8_step01_homepage_netlab"", ""HP:::FF_step01_homepage_hetzner"", ""HP:::FF_step01_homepage_netlab"", usw.). Die Gruppierung nach Homepage-Ergebnissen für unterschiedliche CSI-Gruppen, Browser oder Locations erfolgt dann z.B. beim Aufbau der Graphen der Dashboards entsprechend der Domain-Beziehungen der EventResults und/oder MeasuredEvents.
(i) Aus 1) und 2.1) ergibt sich, dass es separate Graphen für die Messung des selben Jobs/Events vor der Umstellung auf Multistep und nach der Umstellung gibt.

2.2)
Das eintreffende EventResult wurde gemessen mit einem multistep-WPTServer/-Agenten aber OHNE setEventName-command im Script. In diesem Fall würde für den vom Agenten gelieferten eventName ein MeasuredEvent mit entsprechendem name gesucht. Wenn bereits ein solches existiert wird das neue EventResult zugeordnet, ansonsten wird ein neues MeasuredEvent erzeugt. Es erfolgt keine automatische Zuordnung einer Page (kann ja auch nicht sinnvollerweise erfolgen).

2.3)
Das eintreffende EventResult wurde gemessen mit einem nicht-multistep-fähigen WPTServer/-Agenten. Für die in diesem Fall zu erzeugenden MeasuredEvents gibt es zwei unterschiedliche Möglichkeiten:

*Zu Klären:*

2.3.1)
Da das neue Datenmodell in der Job-Klasse kein Attribut testedPage mehr vorsieht, kann beim Eintreffen eines EventResults keine Prüfung auf eine Page anhand des Jobs erfolgen. Beim ersten eintreffenden EventResults eines entsprechenden Jobs wird nach einem MeasuredEvent mit dem Namen des Jobs gesucht. Existiert ein entsprechendes Event, so wird das neue EventResult hinzugefügt (und es ist ggf. bereits eine Page zugeordnet). Existiert kein MeasuredEvent mit dem Jobnamen, so wird erst mal ein neues MeasuredEvent für den Jobnamen mit der Page UNDEFINED erzeugt. Nachfolgend muss eine manuelle Zuordnung der Page erfolgen, wenn dies gewünscht ist (CSI-Relevanz).
2.3.2)
Wir erhalten das Attribut testedPage in der Job-Klasse, obwohl es der multistep-Funktionalität entsprechend keinen Sinn mehr macht. Dann könnte man beim Eintreffen eines nicht-multistep-Results die Page aus dem Job erfragen. Wenn eine vorliegt würde diese an das neue MeasuredEvent angehängt. Wenn keine vorliegt würde die Page UNDEFINED angehängt.
Das erhaltene DB-Feld würde nicht im Domänen-Modell abgebildet und per native-SQL abgefragt."		Task	OpenSpeedMonitor	13/Aug/13 11:31 AM	15/Aug/13 2:30 PM														13/Aug/13 1:50 PM;nkuhn;Wir haben uns für die Umsetzung der Variante 2.3.1 entschieden.																																																						
