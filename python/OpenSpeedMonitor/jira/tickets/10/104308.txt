Spike solution for QMig (mpd)	"migration of Queries [Configurations] for Masterplan diagram. 



Create QueryMigrationService for this perposes



old queries are stored in database (table *saved_queries*, column *SAVED_QUERY_TYPE* = *reports_export_graphical_Masterplan*) as XML-File



TODO (Create Sub Tasks):

- Read XML-Representation (look for existing code)

- parse it(look for existing code)

for master plan diagram there are three sections: 

** *masterplanOptions*(configuration of mpd) 

** *mainQuery*(filter configuration for elements the diagram is based on)

** *selectedResultIds* - list of manuel selected elements (filter)

** *visibleColumns*: not sure if relevant for diagrams

- transform parced configuration into configuration URL for IC (see 

** https://iteraweb.iteratec.de/confluence/display/ITPL/Alle+Diagramme - overview of options to be migrated

** https://iteraweb.iteratec.de/confluence/pages/viewpage.action?title=URL+parameters+for+new+client&spaceKey=ITPL) overview of new configuration json structure

- Store result json string into Database (table stored Queries) (test with integration tests)



(!) this is a spike solution if there are too much redundances -> follow up ticket"		Improvement	iteraplan Thunderduck	30/Nov/16 9:11 AM	10/Jan/17 9:26 AM														"08/Dec/16 4:22 PM;ach;EBNF for serialized Combined Filter



{code:java}

combinedFilter = primaryFilter C/ levelFilter C/ relEndFilters;

primaryFilter= andFilter;

levelFilter = filterValue;

relEndFilters = relEndFilter C/ relEndFilter C/...;

relEndFilter = relEndPersistentName R/ connected R/ andFilter;

connected = 0  1;  //is connected-filter or noConnection-filter?

andFilter = orFilter A/ orFilter A/ ...;

orFilter = singleFilter O/ singleFilter O/ ...;

singleFilter = filterType S/ propertyPersistentName S/ operator S/ filterValues;

filterType= text  enum  num  date  duration;

{code}

filterValue, propertyPersistentName, relEndPersistentName, operator, filterValues  are string values

"	"12/Dec/16 2:58 PM;mwe;||Classic Client||New Client||Done||

|Filter|get from combinedFilter|Will be done in IPTT-332|

|View Selected|get from combinedFilter (manual selection)|Will be done in IPTT-332|

|TimeSpan|There is no timeSpan; the timeSpan.starDate is used for viewPortStartDate|(/) the masterplan diagram implementation in the new client will get fixed to work without timespan when loading the diagram IPTS-413|

|-|viewPortStartDate (the date of the diagram to start the view port from, not yet implemented in the new client)|(/)|

|-|scaleFactor:1|(/)|

|postProcessingStrategies|includingConnectedIS|(/)|

|Selected Element Type (Level)|buildingBlockType (Level)|(/)|

|DateIntervals (Level)|DateIntervals (Level)|(/)|

|hierarchical (Level)|hierarchical (Level)|(/)|

|additional columns (Level) |in levels: columnsMap, selfRelations (see code); columnsMap of whole object generated by the new client itself|(/)|

|relationToBbType (Level)|relationshipName (Level)|(/)|

|coloring (colorAttributeId,selectedColors,colorAttributeValues) (Level)|colorURI (Level) (if the coloring attribute is of type NUMBER the first selected color will be taken as min and the second to last will be taken as max value. As default color value the last color item in the selectedColors array will be taken)|(/)|

|Advanced options (extra legend, info about query)|-|(/)|

|Output (Visio, Element links)|-|(/)|"																																																					
