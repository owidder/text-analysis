Level 2 in Masterplan diagram shows only BBTs with create-permission	"*Summary:*

The level 2 dropdown menu of a masterplan diagram shows only Building Block Type on which the user has the permission to *create* it. But a *read*-permission should be sufficient.



*Reproduce:*

* Create a user which has no create-permissions (for any Building Block type) but the permission to read all Building Block Types and to create diagrams.

* Log in with this user

* Create a masterplan diagram and select any query

* On the second configuration screen you see a drop-down for ""Level 2""



*Actual:*

* Only self-relations are shown



*Expected:*

* All relations to any Building Block Type on which the user has the permission to *read* should be offered.



*Code: InitFormHelperServiceImpl*



 /** {@inheritDoc} */

  public List<String> getRelationshipsToOtherBbTypes(String bbType) {

    List<String> result = new ArrayList<String>();



    result.add(Constants.REPORTS_EXPORT_SELECT_RELATION);

    result.addAll(TypeOfBuildingBlock.getTypeOfBuildingBlockByString(bbType).getSelfReferencesPropertyKeys());

    TypeOfBuildingBlock typeOfBb = TypeOfBuildingBlock.getTypeOfBuildingBlockByString(bbType);

    for (TypeOfBuildingBlock relatedType : typeOfBb.getConnectedTypesOfBuildingBlocks()) {

      if (!typeOfBb.equals(relatedType) && UserContext.getCurrentPerms().userHasBbTypeCreatePermission(relatedType)) {

        result.add(relatedType.getPluralValue());

      }

    }

    return result;

  }







The condition {{UserContext.getCurrentPerms().userHasBbTypeCreatePermission(relatedType)}} is the problem."		Bug	iteraplan PO	04/Dec/15 2:11 PM	14/Jul/16 2:20 PM														14/Jul/16 2:20 PM;fka;Classic Client, won't be fixed																																																						
