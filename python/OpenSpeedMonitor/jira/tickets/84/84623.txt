iteraplan startet nicht nach Upgrade von Version 5.0 auf Version 5.2	"Beim starten des Tomcats kommt es zu einem HibernateSearchIntegrator not found Fehler ... Log mit Fehlermeldung im Anhang.



Setting:

Windows Server 32 Bit

Tomcat 7

Java 8

Oracle 11.2g



Für Fragen steht Ingo zur Verfügung."		Fault	iteraplan Support	17/May/16 1:15 PM	08/Jun/16 3:12 PM														"17/May/16 1:15 PM;wolfgang.brazda@evn.at;

[^iteraplan-5.2.0.log] _(32 kB)_"	"19/May/16 9:38 AM;sfe;Der Fehler ist ungewöhnlich. Der Fehler besagt grob, dass eine in einer Konfigurationsdatei angegebene Java-Klasse nicht gefunden werden konnte.
Interessant hierbei ist, dass sowohl die Konfigurationsdatei als auch die zu findende Klasse aus derselben jar-Datei einer der von iteraplan verwendeten Bibliotheken kommen.

Bitte stellen Sie alle Dateien, die ""hibernate"" im Dateinamen enthalten und sich im _WEB-INF/lib_-Verzeichnis Ihrer iteraplan-Installation befinden, in einem zip-Archiv zusammen, und fügen dieses Archiv an das Ticket hier an.
Ich möchte mir damit einen Überblick verschaffen, ob bei der Installation bezüglich der Hibernate-Bibliotheken etwas schiefgegangen ist.

Vielen Dank"	"20/May/16 8:50 AM;wolfgang.brazda@evn.at;

[^hibernate-entitymanager-3.6.10.Final.zip] _(4,47 MB)_"	"20/May/16 9:02 AM;wolfgang.brazda@evn.at;Sorry falsche Version erwischt

[^hibernate-commons-annotations-5.0.1.Final.zip] _(7,28 MB)_"	20/May/16 9:06 AM;sfe;Vielen Dank. Ich melde mich sobald ich Neuigkeiten oder weitere Fragen habe.	20/May/16 11:32 AM;sfe;Ich habe noch eine zusätzliche Frage: Verwenden Sie Oracle Java, oder die Open JDK Java-Implementierung?	"27/May/16 9:51 AM;wolfgang.brazda@evn.at;Hier ein Screenshot der Java Version.

!iteraplan-java-version.jpg|thumbnail!"	27/May/16 9:52 AM;wolfgang.brazda@evn.at;Sorry die späte Rückmeldung. Leider bekomme ich keine Benachrichtigung, wenn ein neuer Eintrag erfolgt ist.	"30/May/16 2:21 PM;sfe;Hallo,
leider finden sich in den hibernate JAR-Dateien keine Auffälligkeiten. Die nächste Vermutung wäre, dass möglicherweise irgendwelche Konflikte innerhalb Ihrer Tomcat-Installation existieren. Das ist allerdings nur sehr schwer ""remote"" zu diagnostizieren.
Wäre es möglich, dass Sie Ihre komplette Tomcat-Installation in ein ZIP-Archiv verpacken? Für den Fall, dass Ihr Tomcat wie in vielen neueren Installationen auf Linux-Systemen ""verteilt"" installiert ist, gehören dazu:
* Tomcat lib-Verzeichnis
* Tomcat conf-Verzeichnis
* Tomcat bin-Verzeichnis
* Tomcat webapps-Verzeichnis

Sie sollten dabei darauf achten, dass iteraplan in folgenden Dateien Passwörtern abgelegt haben kann (alle Verzeichnisse relativ zum iteraplan-Applikationsverzeichnis):
* _META-INF/context.xml_
* _WEB-INF/classes/iteraplan-db.properties_
* _WEB-INF/classes/iteraplan-auth.properties_ (im Falle einer LDAP-Integration)
* _WEB-INF/classes/iteraplan.properties_ und/oder _WEB-INF/classes/iteraplan-local.properties_ (im Falle von aktivierten E-Mail Benachrichtigungen)

Falls auf dem Tomcat andere Applikationen neben iteraplan installiert sind, wäre es gut, wenn diese mit eingepackt würden. Falls dies nicht möglich ist, hätte ich gerne eine Liste dieser Applikationen.

Bitte teilen Sie uns mit, wie groß das ZIP-Archiv ist, so dass wir eine angemessene Möglichkeit finden können, die Daten zu übertragen.

PS: Das Problem mit den fehlenden Benachrichtigungen vom Service-Desk habe ich an unser Infrastruktur-Team weitergegeben, die an einer Lösung arbeiten."	"31/May/16 9:22 AM;wolfgang.brazda@evn.at;Guten Morgen,

Das zip File hat eine Größe von 277MB.

Wo kann ich dieses File uploaden?

"	"31/May/16 12:07 PM;wolfgang.brazda@evn.at;Email Benachrichtigung funktioniert schon. 
Danke
"	31/May/16 1:43 PM;wolfgang.brazda@evn.at;Mir ist bei ersten Zip File ein Fehler unterlaufen. Habe es jetzt nochmals gezippt und es sind 405MB. :)	"31/May/16 3:22 PM;sfe;Ich schicke Ihnen einen Link für unseren sicheren Datei-Upload: https://iteratec.ftapi.com/submit/iteraplan_support
Bitte folgen Sie einfach den Anweisungen, sie bekommen dann eine Möglichkeit, die Datei hochzuladen."	01/Jun/16 11:52 AM;sfe;Vielen Dank, ich konnte die Daten herunterladen und beginne mit der Analyse.	"06/Jun/16 9:05 AM;sfe;Bislang konnte ich den Effekt noch nicht nachstellen.
Mir ist allerdings aufgefallen, dass Sie in Ihrem Tomcat lib-Verzeichnis die Datei ojdbc5.jar verwenden. Mit iteraplan 5.2.0 hat sich die Mindestanforderung an den Oracle JDBC-Treiber zu ojdbc6.jar geändert. Bitte upgraden Sie dies so bald wie möglich."	06/Jun/16 10:02 AM;sfe;Mir ist außerdem aufgefallen, dass in der Datei _server.xml_ im Tomcat conf-Verzeichnis zwei Connectors für den Port 8080 definiert sind. Verwenden Sie hier bitte nur einen (am besten den zweiten, der vollständiger konfiguriert ist).	"06/Jun/16 2:20 PM;sfe;Hallo nochmal,
nachdem wir noch 3 andere Fälle dieser Art hatten, und bei all diesen dasselbe Problem durch eine Verwendung von Java 6 hervorgerufen wurde, habe ich Ihre Installation auch nochmals mit Java 6 ausprobiert.
Damit konnte ich das von Ihnen beschriebene Fehlerbild nachstellen.

Bitte stellen Sie sicher, ob Sie tatsächlich Java 8 verwenden. Ihr Tomcat scheint als Windows-Service installiert zu sein. Wenn Sie im ""bin""-Verzeichnis des Tomcats die Datei _Tomcat7w.exe_ ausführen, öffnet sich die Tomcat-Konfiguration. Prüfen Sie bitte, ob dort im Tab ""Java"" die richtige Java Virtual Machine eingetragen ist.
Prüfen Sie bitte außerdem, ob die Umgebungsvariable ""JAVA_HOME"" in Ihrem System den richtigen Wert hat.

Beim Startup sollte der Tomcat Rückmeldung über die verwendete Java-Version in die Datei _catalina.out_ schreiben. Hier ein Beispiel:
{noformat}
Mai 31, 2016 11:58:55 AM org.apache.catalina.startup.VersionLoggerListener log
INFORMATION: Java Home:             C:\Program Files\Java\jre1.8.0_66
Mai 31, 2016 11:58:55 AM org.apache.catalina.startup.VersionLoggerListener log
INFORMATION: JVM Version:           1.8.0_66-b18
Mai 31, 2016 11:58:55 AM org.apache.catalina.startup.VersionLoggerListener log
INFORMATION: JVM Vendor:            Oracle Corporation
{noformat}"	"06/Jun/16 2:30 PM;wolfgang.brazda@evn.at;Hallo Hr. Feroudj,
Sie haben recht. die Java Variable zeigt noch auf Java 6. Ich werde morgen Vormittag nochmals das Upgrade ausführen und gebe ihnen danach gleich bescheid.

Vorab schon mal Danke für ihre Hilfe
"	"07/Jun/16 10:09 AM;wolfgang.brazda@evn.at;Hallo Hr. Feroudj,
Ich habe alles ausgebessert, was sie mir geschrieben haben. Es hat trotzdem noch einen Fehler gegeben und zwar im db proberties File. hier gehört nach dem Port ein / und kein :.

Ich installiere jetzt noch die beiden restlichen Instanzen und gebe ihnen danach nochmals Feedback.
"	"07/Jun/16 10:11 AM;sfe;Vielen Dank für die Rückmeldung.
Interessehalber: Sie greifen auf Ihre Oracle DB vermutlich über einen Service-Namen zu, richtig?"	07/Jun/16 11:15 AM;wolfgang.brazda@evn.at;Wir greifen mittels DB User und PW auf die DB zu. Ich hoffe, dass ist die Information, die sie wissen wollen.	07/Jun/16 11:44 AM;wolfgang.brazda@evn.at;So, ich habe nochmals bei meinem Kollegen bez. Service Name nachgefragt. Ja wir verwenden Service Namen. :)	"08/Jun/16 9:10 AM;wolfgang.brazda@evn.at;Hallo,

Jetzt habe ich alle Instanzen zum Laufen gebracht.

Danke für die Unterstützung auch an Ingo."	08/Jun/16 3:12 PM;sfe;Es freut mich, dass es nun geklappt hat!																															
