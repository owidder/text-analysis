LDAP Authentifizierung	"Sehr geehrte Damen und Herren,



die Authentifizierung für iteraplan erfolgt bei uns über das Active Directory. Es kommt vor, dass Benutzer in mehreren Subdomänen vorhanden sind. Dadurch kommt es bei genau diesen Nutzern zu Problemen beim iteraplan-Login. Gibt es eine Möglichkeit, dass bei der Authentifizierung nur die Hauptdomäne und nicht die Subdomänen abgefragt werden?



Vielen Dank und viele Grüße



Kai Steenblock

"		Technical question	iteraplan Support	03/Jul/17 11:04 AM															"04/Jul/17 3:18 PM;cst;Guten Tag Herr Steenblock,

habe das zur Prüfung an unsere Entwickler weitergegeben.
Bei Antwort werde ich Sie umgehend informieren.

Viele Grüße,

Christoph Stangl - iteraplan Support"	"10/Jul/17 8:08 AM;cst;Sehr geehrter Herr Steenblock,

vielen Dank für Ihre Geduld.

Die Abfrageparameter werden ""iteraplan-auth.properties"" definiert, diese finden Sie im Pfad ""Tomcat7/webapps/iteraplan Instanz/WEB-INF/classes"".
In diesem kann man über die einzelnen Parameter die LDAP-Abfrage justieren. 

Wir führen keine LDAP-Konfigurationen für Kundensysteme durch, die Einstellungen müssten von Ihrem LDAP-Experten / Administrator eingestellt werden. 

Viele Grüße,

Christoph Stangl - iteraplan Support

 "	"10/Jul/17 4:36 PM;k.steenblock@ktr.com;Hallo Herr Stangl,

vielen Dank für Ihre Antwort. Wir haben nun den folgenden Parameter ergänzt:
ldap.users.searchbase=OU=IT & Organisation,OU=TACKE Unternehmensgruppe,OU=Benutzer

Weiterhin ist es einigen Usern nicht möglich iteraplan zu nutzen. Es scheint, als wenn der Login erfolgreich wäre, es jedoch keinerlei Autorisierung für die entsprechenden Nutzer gibt. Können Sie uns eventuell in einer Telefonkonferenz, zusammen mit unserem LDAP-Experten, weiterhelfen?

Viele Grüße
Kai Steenblock"	"11/Jul/17 8:00 AM;cst;Hallo Herr Steenblock,

bevor wir dies durchführen, hätte ich noch zwei Fragen.

Die Anmeldung funktioniert, aber die Benutzer haben keinerlei Rechte? 
Sollte dies der Fall sein, wurden die LDAP-Gruppen schon als Rolle in iteraplan eingerichtet?

Um einer Benutzer iteraplan-Supervisor zu erstellen, gehen Sie wie folgt vor:
 # Öffnen Sie Ihre Datenbank
 # Gehen in die Tabelle „role“
 # Hier sollte der Datensatz „IhreAdminGruppe“ und „iteraplan_Supervisor“ angelegt sein
 # Notierten Sie sich von beiden die ID´s
 # Jetzt gehen Sie in die Tabelle „role_role“ und erzeugen einen neuen Eintrag
 # Die erste ID ist die vom „IhreAdminGruppe“ und danach die ID des „iteraplan_Supervisor“
 # Damit sind die Rollen miteinander verknüpft

Nun kann sich ein Benutzer dieser Gruppe am iteraplan Anmelden und die benötigten Rollen einrichten. 

[https://doc.iteraplan.de/display/iteraplan60/Users%2C+Roles+and+Permissions] 

Sollte dies nicht weiterhelfen, können wir uns das gerne zusammen anschauen. Bitte beachten Sie, das die LDAP Konfiguration nicht Bestandteil unseres Supports ist und ich Ihnen hier nur bedingt weiterhelfen kann. 

Zusätzlich könnte folgendes Ihrem LDAP-Administrator weiterhelfen, sollte es nicht an den oben genannten Rollen liegen.

If the login does not work, then a higher log level is very useful for diagnosis. Add the following four lines to the file {{$TOMCAT_HOME\webapps\iteraplan-ldap\WEB-INF\classes\log4j.properties}}, within the section ""Spring logging"" in that file:
|{{log4j.logger.org.springframework.security.ldap=DEBUG}}
{{log4j.logger.org.springframework.security.ui.webapp=DEBUG}}
{{log4j.logger.org.springframework.security.web.authentication=DEBUG}}
{{log4j.logger.org.springframework.ldap=DEBUG}}|

Near the end of this file you can also see into which file iteraplan is logging. Additionally, $TOMCAT_HOME\logs\catalina-YYYY-MM-DD.log and $TOMCAT_HOME\logs\localhost-YYYY-MM-DD.log can be useful for a diagnosis.

Viele Grüße,

Christoph Stangl - iteraplan Support"	"25/Jul/17 11:52 AM;k.steenblock@ktr.com;Hallo Herr Stangl,

leider wurde das Problem immer noch nicht gelöst. Es hat sich aber nun folgendes ergeben:
Iteraplan scheint Probleme mit verschachtelten Gruppen zu haben. Wenn die User direkt als Member von ""RES_KTR_DE_RHE_IT_Iteraplan_reader"" hinzugefügt werden scheint das Einloggen zu funktionieren. Soll die Berechtigung allerdings über eine Gruppe (Member of) zugeordnet werden, kommt es zu den bekannten Autorisierungsproblemen.

Das bedeutet (siehe Screenshot):
Die Gruppe ""Mei-TEST"" ist Member of ""RES_KTR_DE_RHE_IT_Iteraplan_reader"". Alle Mitglieder von ""Mei-TEST"" sollten also nun berechtigt sein, sich bei Iteraplan einzuloggen. Das funktioniert allerdings bei den Mitgliedern dieser Gruppe nicht. Bei den direkt zugeordneten Usern (""Mustermann, Max"" und ""Reker, Johannes"") ist der LogIn erfolgreich.

Welche Einstellung muss in Iteraplan vorgenommen werden, damit die Berechtigungen rekursiv vergeben werden?

Viele Grüße,
Kai Steenblock

!berechtigungsproblem.png|thumbnail!"																																																		
