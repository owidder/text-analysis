Namensänderung kann in Reactions nicht festgestellt werden	"Hallo,

Wenn sich der Name einer BusinessUnit ändert, ist dies nicht in Event im Array buildingBlockChanges zu sehen.

Kann ich trotzdem die Namensänderung feststellen?

Beste Grüße

Armin Joachimsmeyer"		Fault	iteraplan Support	12/Jul/17 4:31 PM	23/Jul/17 2:36 PM														"13/Jul/17 8:03 AM;cst;Guten Morgen Herr Joachimsmeyer,

vielen Dank für Ihre Anfrage.

Würden Sie mir die aktuelle Version des eingesetzten Skriptes zukommen lassen, das wir das hier gegen prüfen können. 
Wie wird der Name in der Software geändert, händisch, reaction, REST-API? 

Viele Grüße,

Christoph Stangl - iteraplan Support"	"13/Jul/17 9:42 AM;armin.joachimsmeyer@axa.de;Hallo, hier das script:
			 var tBuildingBlockChanges = tChangeEvent.buildingBlockChanges;
			for (var i = 0; i < tBuildingBlockChanges.length; i++) {
				print(""tBuildingBlockChanges[i].persistentName="" + tBuildingBlockChanges[i].persistentName);
				if (tBuildingBlockChanges[i].persistentName == ""name"") {
					if (tBuildingBlockChanges[i].removed.indexOf(""in_SAP_deleted"") < 0
							&& tBuildingBlockChanges[i].added.indexOf(""in_SAP_deleted"") > 0) {
						var tEMail = tChangedObject.getValue(""eMail"");
						tEMail = ""armin.joachimsmeyer@axa.de"";
						if (tEMail != null) {
							var tMessage = ""Die Business Unit "" + tBuildingBlockChanges[i].removed
									+ "" wurde in SAP gelöscht. \r\nEs sind aber noch Informationssysteme verknüpft, siehe ""
									+ tChangedObject.getValue(""Viewer-Link"")
									+ "".\n Bitte hängen sie diese an bestehende Business Units."";
							print(""Name of BusinessUnit changed from "" + tBuildingBlockChanges[i].removed + "" to ""
									+ tBuildingBlockChanges[i].added + "". Send Mail to "" + tEMail + "" with message="" + tMessage);
							tChangedObject.sendMail(tEMail, ""armin.joachimsmeyer@axa.de"", ""Iteraplan Pflege nötig"", tMessage);
						}
					}
				}
			}"	13/Jul/17 7:41 PM;armin.joachimsmeyer@axa.de;Der Name wird erst mal händisch geändert, später dann per REST	"14/Jul/17 10:00 AM;cst;Würden Sie mir bitte das komplette Skript schicken, um das 1zu1 nachprüfen zu können.
Sie können mir dies auch als Datei an das Ticket mit anhängen. 

Viele Grüße,

Christoph Stangl 

 

 "	"18/Jul/17 8:49 AM;armin.joachimsmeyer@axa.de;Hallo Herr Stangl,
hier das Script. Der Teil ab Zeile 177 tuts nicht.
Beste Grüße
Armin Joachimsmeyer

[^AxaPlausis.js] _(49 kB)_"	"21/Jul/17 4:10 PM;cst;Guten Tag Herr Joachimsmeyer,

vielen Dank für Ihre Antwort.

Unser Entwicklerteam hat folgendes Skript für den Test verwendet. 
Hier werden alle Anderungen ausgeben und die von Ihnen oben beschriebenen Namensänderung sind dabei.

Das Skript schaut wie folgt aus:

""use strict"";

api.subscribeFor(""BusinessUnit"", onBusinessUnitChange);


function onBusinessUnitChange(aBuildingblocktype, event) \{
 for (var index = 0; index < event.length; index++) \{
 var tChangeEvent = event[index];
 if (tChangeEvent.changeType == ""DELETE"") \{
 // we have no object anymore
 return;
 }

//Going throug all changes
 var changes = tChangeEvent. buildingBlockChanges;
 for (var i = 0; i < changes.length; i++) \{
 //persistentName of the changes attribute and the values before and after the change
 print(""persistentName="" +changes[i].persistentName + "" added"" + changes[i].added + "" removed="" + changes[i].removed);
 }
 
 var tChangedObject = api.datamodel.findByTypeAndId(""BusinessUnit"", tChangeEvent.id);
 var tName = tChangedObject.getValue(""name"");

print(tChangeEvent.changeType + "" of with ID="" + tChangeEvent.id + "" name="" + tName);
 }
}

Viele Grüße,

Christoph Stangl - iteraplan Support

 "	"21/Jul/17 9:04 PM;armin.joachimsmeyer@axa.de;Allerbesten Dank Herr Stangl,
das tuts jetzt. Keine Ahnung warum nicht schon früher....
Schönes Wochenende.
Armin Joachimsmeyer"																																																
