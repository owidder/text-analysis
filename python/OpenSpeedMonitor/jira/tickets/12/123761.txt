History Migration extrem langsam	"Wir haben den Versuch die Historie der letzten zwei Jahre bei E.ON zu migrieren nach drei Wochen abgebrochen. Ein einziges IS benötigt z.T. über 30 Minuten. Daneben gibt es eine Reihe von Fehlermeldungen (""Could not migrate changeset""), die leider nicht verraten, an was es denn krankt.



Log des HMT anbei"		Fault	iteraplan Support	07/Jun/17 4:53 PM															"07/Jun/17 4:53 PM;dne;

[^migration.tgz] _(100 kB)_"	"08/Jun/17 3:33 PM;fka;Die History-Migration ist nicht Laufzeit-optimiert. Das ist bewusst so, da sie nur einmalig ausgeführt werden muss - und jede generelle Optimierung jegliches Kosten-/Nutzen-Verhältnis sprengen würde.



Auch bei anderen Kunden lief die Migration länger, aber nie mehrere Wochen(!). Höchstens mal 2 Tage oder so.



Was die Laufzeit positiv beeinflusst, ist eine schnelle DB, eventuell auch direkt auf dem selben Server. Und ausreichend Prozessor-Kapazität. Bei einigen anderen Kunden wurden lang laufende Prozesse auf dem Server nach ein paar Stunden auch durchs System gebremst ...



Wenn das alles nicht hilft, können wir anbieten, die Migration bei uns durchzuführen. Wir bräuchten einen DB Dump dafür - und etwas Zeit.



 



 "	"08/Jun/17 3:46 PM;dne;Die Migration bei uns durchzuführen ist wohl am sinnvollsten. Die Umgebung haben wir dann wenigstens im Griff. 

Nach meiner Vorstellung organisiere ich einen Dump der Datenbank. Dann löschen wir alle History-Einträge, die älter als zwei Jahre sind (Wunsch von E.ON/Uniper) und migrieren die verbliebenen Einträge. Alle Änderungen, die sich in der Zeit der Migration ergeben (können ja durchaus ein paar Tage werden ?!) müssen wir nicht gesondert behandeln, da die ja schon im neuen Format erzeugt werden und entsprechend in den neuen Tabellen landen.

Frage: Wie bekommen wir die migrierten Daten zurück in die Datenbank ohne die bestehenden Einträge zu beschädigen?"	"08/Jun/17 4:10 PM;fka;Hmmm... das genaue Vorgehen mit Migration vs. weiter laufenden Datenänderungen inkl. History in Prod müssen wir im Detail noch technisch abstimmen.



Wie zeitkritisch ist das alles? Uns würde entgegen kommen, wenn wir das nach der Rückkehr von CST aus dem Urlaub angehen könnten, das wäre in ca. 2,5 Wochen."	"08/Jun/17 4:14 PM;dne;Termin für die Migration von Prod ist am 26.6.
Aus meiner Sicht hängt die History aber nicht zwingend an dem Termin. Werde das morgen absprechen, wie wir vorgehen wollen."	26/Jun/17 2:48 PM;dne;*push* - sind noch am Thema "neuer Client lädt nicht" dran.	27/Jun/17 12:31 PM;dne;Habe mit E.ON ausgemacht, dass wir die Migration der History der letzten zwei Jahre durchführen. Alles was älter ist, kommt weg. Einzige Ausnahme: Sie benötigen den Ersteller und das Erstelldatum eines Elements.	"06/Jul/17 4:51 PM;dne;Wie wollen wir das Thema angehen? Ich habe einen (inzwischen wohl zwei Wochen alten) Abzug der Produktionsdatenbank. Mir wäre es recht, wenn wir damit schon einmal loslegen, wissend das es sehr lange dauern kann, und die zwei-drei Wochen die dann noch dazu kommen im Rahmen der Prod-Migration ergänzen.

Den ersten Teil könnten wir dann schon in der Testumgebung einspielen und begutachten."	"07/Jul/17 8:00 AM;cst;Hallo Daniel,

sag mir einen Termin, dann blocke ich diesen und wir können das Thema angehen.

Viele Grüße,

Christoph Stangl - iteraplan Support"	14/Jul/17 11:02 AM;dne;Die Prod-Installation ist am 17.7., also kommenden Montag. Werde da noch einmal einen frischen Dump anfragen, mit dem du dich dann austoben kannst. Melde mich am Montag bei dir.	"17/Jul/17 9:19 AM;cst;[https://iteratec.ftapi.com/submit/iteraplan_support] 

Viele Grüße,

Christoph Stangl - iteraplan Support"	"17/Jul/17 1:41 PM;dne;Patrick Pyka von HPE sollte den aktuellen Dump hochgeladen haben. Der enthält auch die kompletten 5GB Project History.

Good news für die Migration: Wir können die Project History komplett ignorieren! Die Daten sind nicht relevant und aktuell gibt es kein einziges Projekt im Datenbestand :)"	17/Jul/17 2:55 PM;cst;14:55 Migration - gestartet	17/Jul/17 4:12 PM;dne;Bitte schicke die Info was zu tun ist morgen an Pyka, Patrick (DXC Database Services) <patrick.pyka@dxc.com> und Zindl, Alexander <Alexander.Zindl@eon.com>.	17/Jul/17 4:14 PM;dne;Habe das Ticket mit Alex geteilt	"19/Jul/17 7:54 AM;cst;Migration is still running

Greetings,

Christoph Stangl - iteraplan Support"	"20/Jul/17 7:40 AM;cst;Migration is still running

the reason for this, are the many relations in every building block unit. 

Greetings,

Christoph Stangl - iteraplan Support"																																						
