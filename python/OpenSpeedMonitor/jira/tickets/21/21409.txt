Start des ZAP Prozesses vor Beginn des Penetrationstests	"ZAP wird aktuell aus groovy herraus gestartet. Hierbei kommt es jedoch zu Fehlverhalten in ZAP. (ZAP läuft noch aber reagiert nicht mehr über die rest API; Proxy Funktionalität fällt aus) 

Wird ZAP von Hand vor Ausführung des Gradle Scripts gestartet laufen die Jobs wie geplant durch. 

Es muss geprüft werden wie ZAP korrekt vor den Tests gestartet werden kann.



Ein init.d Script ist eventuell ein möglicher Ansatz."		Bug	secureCodeBox	06/Oct/14 11:02 AM	29/Oct/14 3:06 PM														"29/Oct/14 3:06 PM;bwo;Jenkins startet ZAP, hier für wird nun über einen Shell-command vor dem Build invoke ausgeführt:

bash /usr/bin/xvfb-run src/main/scripts/startHeadlessZap.sh 8089 src/main/config/iteratecServerConfig.cnf &

sleep 5s

Die 5 Sekunden sleep dienen als Puffer, da sonst aus dem Projekt heraus Zap noch nicht gefunden wird und ebenfalls von dort aus gestartet wird



Ist ein build erfolgreich, so wird ZAP automatisch beendet, für alle anderen Fälle befindet sich ein Post build task, dieser sucht die Prozess ID und beendet den Prozess.

Bei dem Grep Befehl wurde das ""a"" als Regex beschrieben, da der Grep Befehl sonst auch die eigentliche Suche auflisteten würde.



set +e

output=`ps aux|grep z\[a\]p`

set -- $output

pid=$2;kill $pid >/dev/null 2>&1





"																																																						
