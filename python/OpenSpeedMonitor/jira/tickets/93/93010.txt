Some Inserts via PAPI cause Update and not Insert Events	"Contact [~mse]

If a new BB is created via PAPI and this BB also is connected to other BB, we receive an update and not an insert event. 

If we have no connections we obtain an insert event."		Bug	iteraplan Thunderduck	11/Aug/16 10:08 AM	18/Aug/16 2:05 PM														"16/Aug/16 10:12 AM;mse;I cannot reprocude the problem and get the correct events (one INSERT for the new IS and one UPDATE for the existing IS) with the following script:





{code:java}

'use strict';

print('******************************');

print('Loading test write');



api.subscribeFor('ITService', onITSChange);

api.subscribeFor('InformationSystem', onIsChange);



function onITSChange(buildingblocktype, event) {

    for (var index = 0; index < event.length; index++) {

        print('******************************');

        var change = event[index];

        print('Writing action after ' + change.changeType + ' of IT Service with ID ' + change.id);



        var newIs = api.datamodel.create(""InformationSystem"");

        newIs.setValue(""name"", ""New Test-IS # 4.34"");

        newIs.setValue(""typeOfStatus"", ""CURRENT"");

        newIs.setValue(""description"", ""Newly created IS"");



        var existingIs = api.datamodel.findByTypeAndName(""InformationSystem"", ""BI # 1.0"");

        existingIs.connect(newIs, ""successors"");

    }

}



function onIsChange(buildingblocktype, event) {

	for (var index = 0; index < event.length; index++) {

        var change = event[index];

        print(change.changeType + ' of IS with ID ' + change.id);

	}

}

{code}

"	18/Aug/16 2:05 PM;ach;not relevant since there are no recursive invokation of plugins in iteraplan																																																					
