Maven hängt beimdownloaden der Dependencies	"Letzte Woche hat sich DSH schon bei Euch gemeldet, dass der Jenkins-Slave str-slave1.iteratec.de Probleme hat Maven-Artefakte von taco.iteratec.de zu laden. Dieses Problem bsteht nachwievor.



Ich habe mir das ganze etwas genauer:

 * Es liegt nicht am Nexus (taco.iteratec.de) da das ganze auf dem Master (str-build.iteratec.de) problemlos funktioniert.

 * An Jenkins liegt es auch nicht, da bauen mit Maven auf der Kommandozeile auf str-slave1.iteratec.de genauso hängt.

 * Downloade ich ein Artefakt per wget/cURL dann funktioniert das Problemlos.

 * Wir selbst haben keine Firewalls auf den Systemen am laufen.



Alle Systeme sind Uptodate. Diverse Caches löschen und neustarten brachte nichts.



Das Fehlerbild stellt sich so dar: Maven beginnt Artefakte von taco.iteratec.de zu laden. Nach einigen erfolgreichen Downloads bleibt dann einer hängen. Es ist immer so, dass das Artifakt komplett geladen wird aber das ganze nicht zu Ende kommt. Bsp. ... 35kB/35kB downloaded.... Bis es irgendwann zu einem Timeout kommt.



Verteilung:

 * str-build.iteratec.de MUC

 * taco.iteratec.de MUC

 * str-slave1.iteratec.de STR



Für mich sieht das so aus als wäre das ein Netzwerk/Firewall Problem. Macht da ev. eine Firewall so etwas wie Rate-Limiting? Maven zieht unter Umständen ja schon sehr viele JARs vom Nexus in kurzer Zeit."		Task	Infrastruktur	20/Mar/17 10:37 AM	22/Mar/17 8:32 AM	Sonstiges													"20/Mar/17 3:05 PM;sas;Vorab kann ich nur folgendes bestätigen. Zwischen der Geschäftstellen MUC<-> STR befindet sich einen VPN-Tunnel. Dieser Tunnel erlaubt uneingeschränkt vollen Zugriff auf die Server der Geschäftstellen. Der Hamburger Server ""Jenkins-Slave"" greift (ich denke per http:port) auf den ""Taco.iteratec.de"" und holt sich Daten ab. Der Zugriff funktioniert laut eurer Ausage manchamel nicht, die benötigten Daten werden nicht komplett heruntergeladen. Um die Fehler zu beschränken, brauchen wir weitere Informationen von euch:

 * wie oft findet dieser Zugriff statt? wann in etwa passieren diese Aussfälle ( am Tag am Abend, Wochende).

 * Wie groß sind die geholten Daten, kann man sie in 10/20/100 MB in etwa beziffern?

 * Was passiert, wenn die Daten nicht komplett von dem Taco-Server geholt werden, wird der Dienst nochmal automatisch wiederholt?

 * Was passiert wenn man einen daurenden Ping von ""Jenkins-Slave"" auf ""Taco"" startet? gehen Pakete verlorren, wie viele in etwa?

 * können wir einen User auf ""Jenkins-Slave"" bekommen, um ein Tests durchzuführen?



 * Wir können sicherlich nicht ausschliessen, dass die Internetanbindung nach München teilweise belastet ist, hängt davon ab was die meisten der Kollegen so alles tun."	"20/Mar/17 3:22 PM;sst;* wie oft findet dieser Zugriff statt? wann in etwa passieren diese Aussfälle ( am Tag am Abend, Wochende).

 ** Diese Zugriffe finden immer wieder statt. Das Problem beschraenkt sich nicht auf eine Uhrzeit. Das Problem tritt erst seit ca. einer Woche auf. Aber ich kann das reproduzieren.

 * Wie groß sind die geholten Daten, kann man sie in 10/20/100 MB in etwa beziffern?

 ** I.d.R. im KB-Bereich, ab und zu auch mal im MB Bereich. Es können aber schon relativ viele Files sein.

 * Was passiert, wenn die Daten nicht komplett von dem Taco-Server geholt werden, wird der Dienst nochmal automatisch wiederholt?

 ** Na das Maven bricht mit einbem Fehler ab:\{\{ Downloading: [http://taco.iteratec.de:8081/content/groups/public/org/apache/maven/plugins/maven-compiler-plugin/3.6.1/maven-compiler-plugin-3.6.1.jar]}}\{\{ 57/58 KB}}\{\{ <riessige nichtsagende Exception, dass halt ein JAR nicht geladne werdne konnte.}}

 * Was passiert wenn man einen daurenden Ping von ""Jenkins-Slave"" auf ""Taco"" startet? gehen Pakete verlorren, wie viele in etwa?

 ** {{149 packets transmitted, 148 received, 0% packet loss, time 148233ms}}

rtt min/avg/max/mdev = 6.909/15.863/50.257/9.003 ms

 ** {{511 packets transmitted, 509 received, 0% packet loss, time 510775ms}}

{{rtt min/avg/max/mdev = 7.147/12.376/34.350/6.379 ms}}

 * können wir einen User auf ""Jenkins-Slave"" bekommen, um ein Tests durchzuführen?

 ** Ihr habt das root-passwort, aber SSH fuer Roor ist disabled. Must via Hyper-V Konsole drauf und dann kanst du dir einen User anlagen nach belieben."	"21/Mar/17 9:50 AM;sst;Auf dem Mac-Mini ({{mobico-mac-mini.iteratec.de}}) den wir als Slave haben tritt das gleiche Problem auf:

{code:java}

mobico-mac-mini:iteraTweet admin$ mvn clean install

[INFO] Scanning for projects...

Downloading: http://taco.iteratec.de:8081/content/groups/public/de/iteratec/str/organization/organization-parent/1.1.1/organization-parent-1.1.1.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/de/iteratec/str/organization/organization-parent/1.1.1/organization-parent-1.1.1.pom (35 KB at 180.8 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-dependencies/1.5.2.RELEASE/spring-boot-dependencies-1.5.2.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-dependencies/1.5.2.RELEASE/spring-boot-dependencies-1.5.2.RELEASE.pom (88 KB at 534.8 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/com/fasterxml/jackson/jackson-bom/2.8.7/jackson-bom-2.8.7.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/com/fasterxml/jackson/jackson-bom/2.8.7/jackson-bom-2.8.7.pom (10 KB at 144.5 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/com/fasterxml/jackson/jackson-parent/2.8/jackson-parent-2.8.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/com/fasterxml/jackson/jackson-parent/2.8/jackson-parent-2.8.pom (8 KB at 119.8 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/com/fasterxml/oss-parent/27/oss-parent-27.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/com/fasterxml/oss-parent/27/oss-parent-27.pom (20 KB at 274.0 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/apache/logging/log4j/log4j-bom/2.7/log4j-bom-2.7.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/apache/logging/log4j/log4j-bom/2.7/log4j-bom-2.7.pom (6 KB at 75.7 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/spring-framework-bom/4.3.7.RELEASE/spring-framework-bom-4.3.7.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/spring-framework-bom/4.3.7.RELEASE/spring-framework-bom-4.3.7.RELEASE.pom (5 KB at 64.9 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/data/spring-data-releasetrain/Ingalls-SR1/spring-data-releasetrain-Ingalls-SR1.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/data/spring-data-releasetrain/Ingalls-SR1/spring-data-releasetrain-Ingalls-SR1.pom (5 KB at 67.9 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/data/build/spring-data-build/1.9.1.RELEASE/spring-data-build-1.9.1.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/data/build/spring-data-build/1.9.1.RELEASE/spring-data-build-1.9.1.RELEASE.pom (6 KB at 70.5 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/integration/spring-integration-bom/4.3.8.RELEASE/spring-integration-bom-4.3.8.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/integration/spring-integration-bom/4.3.8.RELEASE/spring-integration-bom-4.3.8.RELEASE.pom (9 KB at 84.4 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/security/spring-security-bom/4.2.2.RELEASE/spring-security-bom-4.2.2.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/security/spring-security-bom/4.2.2.RELEASE/spring-security-bom-4.2.2.RELEASE.pom (5 KB at 46.6 KB/sec)

[INFO]

[INFO] ------------------------------------------------------------------------

[INFO] Building IteraTweet Server 1.0.0-SNAPSHOT

[INFO] ------------------------------------------------------------------------

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/apache/maven/plugins/maven-failsafe-plugin/2.19.1/maven-failsafe-plugin-2.19.1.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/apache/maven/plugins/maven-failsafe-plugin/2.19.1/maven-failsafe-plugin-2.19.1.pom (10 KB at 91.9 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/apache/maven/plugins/maven-failsafe-plugin/2.19.1/maven-failsafe-plugin-2.19.1.jar

Mär 21, 2017 9:49:33 AM org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RetryExec execute

INFORMATION: I/O exception (java.net.SocketException) caught when processing request to {}->http://taco.iteratec.de:8081: Operation timed out

Mär 21, 2017 9:49:33 AM org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RetryExec execute

INFORMATION: Retrying request to {}->http://taco.iteratec.de:8081

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/apache/maven/plugins/maven-failsafe-plugin/2.19.1/maven-failsafe-plugin-2.19.1.jar (85 KB at 2.1 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-maven-plugin/1.5.2.RELEASE/spring-boot-maven-plugin-1.5.2.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-maven-plugin/1.5.2.RELEASE/spring-boot-maven-plugin-1.5.2.RELEASE.pom (7 KB at 28.7 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-tools/1.5.2.RELEASE/spring-boot-tools-1.5.2.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-tools/1.5.2.RELEASE/spring-boot-tools-1.5.2.RELEASE.pom (2 KB at 12.6 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-parent/1.5.2.RELEASE/spring-boot-parent-1.5.2.RELEASE.pom

Downloaded: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-parent/1.5.2.RELEASE/spring-boot-parent-1.5.2.RELEASE.pom (27 KB at 212.9 KB/sec)

Downloading: http://taco.iteratec.de:8081/content/groups/public/org/springframework/boot/spring-boot-maven-plugin/1.5.2.RELEASE/spring-boot-maven-plugin-1.5.2.RELEASE.jar

64/64 KB

{code}



Ping nach {{taco.iteratec.de}}:

{code}

--- taco.iteratec.de ping statistics ---

366 packets transmitted, 365 packets received, 0.3% packet loss

round-trip min/avg/max/stddev = 7.185/11.927/34.718/6.268 ms

{code}



Tracerout:

{code}

Traceroute to taco.iteratec.de (192.168.3.87), 64 hops max, 52 byte packets

 1  192.168.180.1 (192.168.180.1)  1.085 ms  0.897 ms  0.699 ms

 2  213.61.180.164 (213.61.180.164)  7.496 ms  8.984 ms  8.010 ms

 3  213.61.180.190 (213.61.180.190)  8.775 ms  8.429 ms  8.493 ms

{code}"	"21/Mar/17 2:08 PM;sst;Inzwischen habe ich auch das Problem von meinem Arbeitsplatzrechner (Mac). Ping:

{code}

--- taco.iteratec.de ping statistics ---

78 packets transmitted, 77 packets received, 1.3% packet loss

round-trip min/avg/max/stddev = 7.361/13.053/32.523/6.628 ms

{code}"	"22/Mar/17 8:32 AM;sas;Lösung:



Taco Neustart, Docker Nexus neustart."																																																		
