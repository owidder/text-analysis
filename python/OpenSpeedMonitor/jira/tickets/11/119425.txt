copy attributes writes an exception	"Hello,



our customer would like copy attributes ( look at the screenshot ) and get errors.

We have the problem in production and test environment.



Build ID: Corporate Edition v5.2.0-r25485



The last change we had was an Java update to Oracle jdk1.8.0_121.



Could you help, to find the problem?



Regards Matthias"		Fault	iteraplan Support	24/Apr/17 11:27 AM	27/Apr/17 8:22 AM														"24/Apr/17 11:27 AM;matthias.roth@dekra.com;

!error.jpg|thumbnail!

[^produktion.log] _(31 kB)_

!screenshot.jpg|thumbnail!

[^testsystem.log] _(230 kB)_"	"25/Apr/17 7:42 AM;cst;Dear Mr. Roth,

thank you for your inquiry. 

Could please send me these additional logs, for analyse the problem:
 * The iteraplan log files from the period, when the error occurred. The files are called “*iteraplan-[version].log*” (for today) or „*iteraplan-[version].log.[TIMESTAMP]*” (for past days). The location of these file was specified during installation and is documented in the file “log4j.properties”.
 * The iteraplan *System-Info*. A user with the role “_iteraplan_Supervisor_” can download this file directly in the iteraplan-GUI in the menu Administration/Configuration.

Greetings,

Christoph Stangl - iteraplan Support"	"25/Apr/17 11:02 AM;matthias.roth@dekra.com;Hello Christoph,

I've attached the production logfile from yesterday.

Regards Matthias

[^iteraplan-5.2.0.log.2017-04-24] _(64 kB)_"	"25/Apr/17 11:13 AM;cst;Hello Matthias,

thank you for the log file. 

I checked the log-File and found a problem with the attribute colors. 
Could you please execute the following SQL-Statement:

Oracle:
UPDATE ""AV_ENUM"" SET DEF_COLOR = '000000' WHERE DEF_COLOR is NULL; 

MYSQL:
UPDATE `AV_ENUM` SET `DEF_COLOR`='000000' WHERE  `DEF_COLOR` is NULL;

Greetings,

Christoph Stangl - iteraplan Support

 "	"25/Apr/17 2:26 PM;matthias.roth@dekra.com;Hello Christoph,

thank you for solving the problem with ""Failed to decode color: null"". We have it for such a long time.
But we problem with the attribute still exist.

This is the ""iteraplan-5.2.0.log"" from today.

Regards Matthias

[ERROR] 25-Apr-2017 14:21:18 [iteratecLogTag] Exception occured while inserting a tiles template:[ERROR] 25-Apr-2017 14:21:18 [iteratecLogTag] java.io.IOException: JSPException including path '/jsp/AttributeType/CopyAttribute.jsp'.[ERROR] 25-Apr-2017 14:21:18 [iteratecLogTag] Getting Root Cause of this exception:[ERROR] 25-Apr-2017 14:21:18 [iteratecLogTag] java.io.IOException: JSPException including path '/jsp/AttributeType/CopyAttribute.jsp'.[ERROR] 25-Apr-2017 14:21:18 [iteratecLogTag] org.apache.jasper.JasperException: Unable to compile class for JSP:An error occurred at line: 1 in the generated java fileThe type java.io.ObjectInputStream cannot be resolved. It is indirectly referenced from required .class filesStacktrace:[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.Product mapped to index index.Product, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.TechnicalComponentRelease mapped to index index.TechnicalComponentRelease, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.Project mapped to index index.Project, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.InformationSystemRelease mapped to index index.InformationSystemRelease, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.BusinessDomain mapped to index index.BusinessDomain, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.BusinessObject mapped to index index.BusinessObject, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.ArchitecturalDomain mapped to index index.ArchitecturalDomain, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.InfrastructureElement mapped to index index.InfrastructureElement, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.InformationSystemDomain mapped to index index.InformationSystemDomain, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.BusinessUnit mapped to index index.BusinessUnit, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.ITService mapped to index index.ITService, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.BusinessFunction mapped to index index.BusinessFunction, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.BusinessProcess mapped to index index.BusinessProcess, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField.[WARN ] 25-Apr-2017 14:21:18 [reader.impl.ManagedMultiReader] HSEARCH000289: Requested sort field(s) buildingBlockType.name are not configured for entity type de.iteratec.iteraplan.model.InformationSystemInterface mapped to index index.InformationSystemInterface, thus an uninverting reader must be created. You should declare the missing sort fields using @SortableField."	"26/Apr/17 7:58 AM;cst;Good Morning Matthias,

thanks for your replay. 

Which database do you use for the iteraplan instance? 
It is possible to create a new index?

You can start these on the tab ""Administration"" - ""Configuration"" and ""Create New Index"".

Greetings,

Christoph Stangl - iteraplan Support"	"26/Apr/17 9:44 AM;matthias.roth@dekra.com;Good Morning Christoph,

I did it again. We tried it on Monday too.
But the result is the same.
I attach a current log iteraplan-5.2.0.log.

Regards
Matthias"	26/Apr/17 9:44 AM;matthias.roth@dekra.com;[^iteraplan-5.2.0.log.2017-04-26] _(15 kB)_	"26/Apr/17 9:51 AM;cst;Hi Matthias,

could you please send us the iteraplan *System-Info*. 
A user with the role “_iteraplan_Supervisor_” can download this file directly in the iteraplan-GUI in the menu Administration/Configuration.

Additionally is it possible to create and send me a DUMP of your database? 

Greetings,

Christoph Stangl - iteraplan Support"	"26/Apr/17 10:07 AM;matthias.roth@dekra.com;Hi Christoph,

We have no LDAP group ""cn=iteraplan_Supervisor"". So I think, we don't have a user with this role. 

Is there another way? 

If not, I must create the group and assign my account to it.

Matthias"	"26/Apr/17 10:11 AM;cst;You can do following steps to connect the roles in the database.
 # Open the table ""ROLE"" in the database, here see you all created roles.
 # Note the ID from one of the ""cn"" above (e.g. 5) and the id of the iteraplan_Supervisor (e.g. 2)
 # Open the table ""ROLE_ROLE"" and link both ID´s together. First comes the id of the ""cn"" and the second ID is the iteraplan_Supervisor
e.g 5 - 2

After that steps, the group has the ""iteraplan_Supervisor"" rights and you can create the System-Info."	"26/Apr/17 10:42 AM;matthias.roth@dekra.com;Hi Christoph,

I have the system info and I hope it will help.

Matthias

[^ProblemReport_2017-04-26_103919.zip] _(6 kB)_"	"26/Apr/17 12:56 PM;cst;Hi Matthias,

this problem is really strange. 

Could you please delete the work directory (temporary directory) of the Tomcat server in the path
 [TOMCAT]work\Catalina\localhost[ITERAPLAN]?

It looks like that here JSP are mixed together (old and new) version. 

Greetings,

Christph Stangl - iteraplan Support"	"26/Apr/17 1:49 PM;matthias.roth@dekra.com;Hi Christoph,

I will try it, but perhaps I have to wait, till no customer is online.
At the moment I see requests at the access log of the tomcat.
Do you think, I can do it online or better offline?

Regards Matthias"	"26/Apr/17 2:01 PM;cst;Its better to do it offline, because u must stop the tomcat server for clearing the work directory.

Greetings,

Christoph Stangl - iteraplan Support"	"26/Apr/17 2:22 PM;matthias.roth@dekra.com;startet gar nicht mehr ;0(



  3444 2017/04/26-14:21:15  Apr 26, 2017 2:21:15 PM org.apache.catalina.core.StandardWrapperValve invoke 3445 2017/04/26-14:21:15  SEVERE: Servlet.service() for servlet jsp threw exception 3446 2017/04/26-14:21:15  org.apache.jasper.JasperException: Unable to compile class for JSP: 3447 2017/04/26-14:21:15 3448 2017/04/26-14:21:15  An error occurred at line: 1 in the generated java file 3449 2017/04/26-14:21:15  The type java.io.ObjectInputStream cannot be resolved. It is indirectly referenced from required .class files 3450 2017/04/26-14:21:15 3451 2017/04/26-14:21:15  Stacktrace: 3452 2017/04/26-14:21:15       at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92) 3453 2017/04/26-14:21:15       at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330) 3454 2017/04/26-14:21:15       at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439) 3455 2017/04/26-14:21:15       at org.apache.jasper.compiler.Compiler.compile(Compiler.java:334) 3456 2017/04/26-14:21:15       at org.apache.jasper.compiler.Compiler.compile(Compiler.java:312) 3457 2017/04/26-14:21:15       at org.apache.jasper.compiler.Compiler.compile(Compiler.java:299) 3458 2017/04/26-14:21:15       at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:589) 3459 2017/04/26-14:21:15       at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317) 3460 2017/04/26-14:21:15       at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) 3461 2017/04/26-14:21:15       at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) 3462 2017/04/26-14:21:15       at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 3463 2017/04/26-14:21:15       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 3464 2017/04/26-14:21:15       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 3465 2017/04/26-14:21:15       at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 3466 2017/04/26-14:21:15       at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 3467 2017/04/26-14:21:15       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 3468 2017/04/26-14:21:15       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 3469 2017/04/26-14:21:15       at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555) 3470 2017/04/26-14:21:15       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 3471 2017/04/26-14:21:15       at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 3472 2017/04/26-14:21:15       at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) 3473 2017/04/26-14:21:15       at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) 3474 2017/04/26-14:21:15       at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:396) 3475 2017/04/26-14:21:15       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) 3476 2017/04/26-14:21:15       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) 3477 2017/04/26-14:21:15       at java.lang.Thread.run(Thread.java:745) 3478 2017/04/26-14:21:15"	"26/Apr/17 2:31 PM;cst;Kann das sein, das die aktuelle Java-Version und Tomcat 6 Probleme zueinander haben?
Wird in der iteraplan.log etwas anderes geschrieben? 

Also ein Problem mit der Datenbank kann ich erstmal ausschließen, da ist das Fehlerbild ein anderes. 
Ist es möglich die Java-Version auf die vorher eingesetzte zurück zu spielen, oder den Tomcat Server auf Version 7 hoch zu heben? 

Nach einer kleinen Recherche, deutet die Fehlermeldung auf ein Problem mit JAVA hin. 

Grüße,

Christoph Stangl - iteraplan Support

 

 "	"26/Apr/17 2:36 PM;matthias.roth@dekra.com;Hab gerade auch daran gedacht und eine 1.7.0-79 druntergelegt.
Startet wieder. :-)

Hab den Index auch removed und bau den neu auf und dann teste ich das Attribut."	"26/Apr/17 2:41 PM;matthias.roth@dekra.com;Es tut !!!
Beides: Index ist durch - Copy wechselt jetzt ins neue Fenster.
Ich prüfe jetzt nochmal die Requirements, ob Java 8 schon für diese Version zulässig war.

Danke für die Unterstützung.

Grüße Matthias"	"27/Apr/17 8:22 AM;cst;Würde hier empfehlen um JAVA 8 zu verwenden auf den Tomcat 7 zu aktualisieren. 

Mit Version 5.3 wurde der Support für Tomcat 6 eingestellt. 



Viele Grüße,



Christoph Stangl - iteraplan Support"	"27/Apr/17 8:35 AM;matthias.roth@dekra.com;Danke nochmal. Das Ticket können wir schließen.

Bei uns steht sowieso ein Update auf Version 5.5 auf dem Plan, scheitert aber momentan an Kapazität. Da würde ich dann gern mit Tomcat und Java so hoch wie möglich gehen.Da steht Tomcat 8 und Java 8 in den ""Prerequisites"" drin.

Evtl kommt nochmal ein Ticket zum Thema Orace JDK bei euch vorbei. Aber das ist ein anderes Thema.

Danke Matthias"																																		
