Probleme mit Login in iteraplan 5.5	"Hallo Herr Stangl,



wir haben iteraplan 5.5 nun bei uns im Dev-System in einem frischen Tomcat 8 installiert.



Leider schlägt der Login fehl - das Loginfenster bleibt ohne Fehermeldung stehen. Im Tomcat Log und iteraplan Log ist standardmäßig nichts zu sehen. Stellt man das Loglevel für Spring Security auf Debug, wird folgendes geloggt:



[DEBUG] 14-Mar-2017 15:55:04 [access.intercept.FilterSecurityInterceptor] Secure object: FilterInvocation: URL: /api/administration/permissions; Attributes: [IS_AUTHENTICATED_REMEMBERED][DEBUG] 14-Mar-2017 15:55:04 [access.intercept.FilterSecurityInterceptor] Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@90550640: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@7798: RemoteIpAddress: 193.19.26.95; SessionId: 4B1FE2BAB9F2969E7ABC1E2861B6D215; Granted Authorities: ROLE_ANONYMOUS[DEBUG] 14-Mar-2017 15:55:04 [access.vote.AffirmativeBased] Voter: org.springframework.security.access.vote.RoleVoter@34ada908, returned: 0[DEBUG] 14-Mar-2017 15:55:04 [access.vote.AffirmativeBased] Voter: org.springframework.security.access.vote.AuthenticatedVoter@72a13f61, returned: -1[DEBUG] 14-Mar-2017 15:55:04 [web.access.ExceptionTranslationFilter] Access is denied (user is anonymous); redirecting to authentication entry pointorg.springframework.security.access.AccessDeniedException: Access is denied	at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)	at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:206)	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)	at org.springframe



Die Requests im Firefox beim Login finden Sie als Screenshot anbei.



Vielen Dank für Ihre Unterstützung.



Beste Grüße

Matthias Habermann

"		Fault	iteraplan Support	15/Mar/17 5:11 PM	23/Mar/17 3:47 PM														"15/Mar/17 5:11 PM;matthias.habermann@wacker.com;

!requests.PNG|thumbnail!"	"16/Mar/17 7:45 AM;cst;Guten Morgen Herr Habermann,

vielen Dank für Ihre Anfrage. 

Ist es möglich, das Sie uns einen DUMP der Datenbank zur Verfügung stellen?
 Dies würde die weitere Analyse um einiges vereinfachen. 

Sollte dies nicht möglich sein, können wir gerne auch einen Termin zu einer Teamviewer-Sitzung vereinbaren. 

Haben Sie Version 5.5 schon an einer anderen Stelle im Einsatz, oder wird Produktiv bei Ihnen noch Version 5.4 genutzt.

Viele Grüße,

Christoph Stangl - iteraplan Support

 "	"20/Mar/17 8:49 AM;matthias.habermann@wacker.com;Guten Morgen Herr Stangl,

iteraplan 5.5 habe ich bislang nur lokal auf meinem Windows-Client installiert, dort tritt das beschriebene Problem nicht auf. Produktiv nutzen wir noch iteraplan 5.1.

Ein DB-Dump ist schwierig. Könnten wir heute telefonieren, z.B. um 10:30 Uhr?

Viele Grüße
Matthias Habermann"	"20/Mar/17 8:57 AM;cst;Guten Morgen Herr Habermann,

vielen Dank für Ihre Antwort.

Habe mir den Termin im Kalender hinterlegt, könnten Sie mir bitte noch Ihre Rufnummer mitteilen unter welcher ich Sie um 10:30 erreichen kann.

Viele Grüße,

Christoph Stangl - iteraplan Support"	"20/Mar/17 9:16 AM;matthias.habermann@wacker.com;089-62791652

Bis später
Matthias Habermann"	"21/Mar/17 4:38 PM;matthias.habermann@wacker.com;Wie telefonisch besprochen werde ich eine WebEx bei einem Kollegen vom Betrieb aufsetzen. Leider habe ich den Kollegen noch nicht erreicht, werde mich aber mit einem Terminvorschlag bei Ihnen melden.

Viele Grüße
Matthias Habermann"	"22/Mar/17 10:30 AM;matthias.habermann@wacker.com;Hätten Sie morgen (23.03.) ab 13 Uhr Zeit für eine WebEx?

Viele Grüße
Matthias Habermann"	"22/Mar/17 10:34 AM;cst;Guten Tag Herr Habermann,

der Kalender ist frei und wir können das gerne um 13:00 Uhr durchführen.

Viele Grüße,

Christoph Stangl - iteraplan Support"	"23/Mar/17 10:32 AM;cst;Wie telefonisch besprochen, habe ich bei unseren Entwicklern nachgefragt.

Die applicationContext-spring-security.xml unterscheidet sich ob LDAP + SSO installiert wird, oder nur LDAP.

Viele Grüße,

Christoph Stangl - iteraplan Support

 "	"23/Mar/17 2:19 PM;matthias.habermann@wacker.com;Vielen Dank für die Unterstützung heute Früh und für die Information. Ich habe die applicationContext-spring-security.xml geprüft und konnte keine WACKER spezifischen Anpasssungen finden. Das Entwicklungssystem funktioniert nun aus meiner Sicht.

Könnten Sie mir bitte noch eine applicationContext-spring-security.xml für iteraplan 5.5 mit LDAP + SSO im Initialzustand zukommen lassen? Oder muss für SSO dort noch etwas WACKER spezifisch angepasst werden? Der Grund dafür ist, dass wir iteraplan in den anderen Umgebungen nicht installieren, sondern die Installation aus der Entwicklungsumgebung durchschieben und nur die umgebungsabhängigen Konfigurationsdateien austauschen. Besten Dank.

Viele Grüße
Matthias Habermann"	"23/Mar/17 3:11 PM;cst;Wie gewünscht die applicationContext-spring-security.xml  der Version 5.5. 
Diese muss nicht angepasst werden und kann direkt verwendet werden. 

[^applicationContext-spring-security.xml]

Viele Grüße,

Christoph Stangl - iteraplan Support"	"23/Mar/17 3:46 PM;matthias.habermann@wacker.com;Vielen Dank! Das Ticket kann geschlossen werden.

Viele Grüße
Matthias Habermann"																																											
